(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-public-edit"],{1433:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return o})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var o=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[e("v-uni-view",{attrs:{id:"editBox"}},[e("v-uni-form",{on:{submit:function(i){arguments[0]=i=t.$handleEvent(i),t.setDate.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"title"},[t._v(t._s(t.title[0]))]),1==t.type?e("v-uni-view",{attrs:{id:"ImgBox"}},[e("v-uni-view",{staticClass:"addImg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.updateImg(1)}}}),t._l(t.imgList,(function(i,a){return e("v-uni-view",{key:a,staticClass:"imgBox"},[e("v-uni-view",{staticClass:"colse",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.colseImg(a)}}},[t._v("x")]),e("v-uni-image",{attrs:{src:i.url}})],1)}))],2):t._e(),0==t.type?e("v-uni-view",{staticClass:"titIpt"},[e("v-uni-input",{attrs:{name:"title",placeholder:"请输入标题"}})],1):t._e(),e("v-uni-view",{staticClass:"title title1"},[t._v(t._s(t.title[1]))]),e("v-uni-view",{staticClass:"editBox"},[1==t.type?e("v-uni-textarea",{staticClass:"textPhoto",attrs:{name:"text",placeholder:"请输入图片背后故事",maxlength:"-1"}}):t._e(),0==t.type?e("v-uni-textarea",{staticClass:"textStory",attrs:{name:"text",placeholder:"请输入正文",maxlength:"-1"}}):t._e(),0==t.type?e("v-uni-view",{staticClass:"xbox",attrs:{id:"ImgBox"}},[e("v-uni-view",{staticClass:"addImg",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.updateImg(6)}}}),t._l(t.imgList,(function(i,a){return e("v-uni-view",{key:a,staticClass:"imgBox"},[e("v-uni-view",{staticClass:"colse",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.colseImg(a)}}},[t._v("x")]),e("v-uni-image",{attrs:{src:i.url}})],1)}))],2):t._e()],1),e("v-uni-view",{attrs:{id:"Switch"}},[e("v-uni-view",{staticClass:"isSwitch"},[e("v-uni-text",[t._v("是否愿意公开")]),e("v-uni-switch",{staticStyle:{transform:"scale(0.6)"},attrs:{checked:t.isSwitch},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.switchClick.apply(void 0,arguments)}}})],1),e("v-uni-text",{staticClass:"isSwitchTxt"},[t._v("* 选择公开后，您的愿望将被平台其他患者看到哦")])],1),e("v-uni-button",{staticClass:"editSub",attrs:{"form-type":"submit"}},[t._v("提交")])],1)],1),e("v-uni-view",{staticClass:"home",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.goHome()}}},[t._v("返回首页")]),t.isShow?e("popup",{attrs:{type:t.stype,num:t.type},on:{closePopup:function(i){arguments[0]=i=t.$handleEvent(i),t.closePopup.apply(void 0,arguments)}}}):t._e()],1)},n=[]},2493:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAMAAACelLz8AAAAVFBMVEUAAAD/xZz/xZ3/xZz/xp7/x6D/x6T/2LH/yar/0a7/zqr/wpj//v3/+/j/yqX/8ef/xZ3/7uP/3sf/9/L/49D/zq3/6t3/5tX/4Mv/0rT/x6D/1rt4gqxeAAAAC3RSTlMA0PPGpoxJDTkWOV8cq4sAAADJSURBVCjPhVJbEoMgENuCKIo8fdv737OCwMI4bfPhTCYkxGUhgTNKhCCUcajRvkTGqwVE14gKTZeUPlnQ2EcPKqjdPp+mrERYdWWGBv6UdSY7zG6vr+8S4sYyzUgfCTCISkLGgSVi1qOSGNBE1LhXEgWSSSyyzbdEQJR3qcNNq4mskM5NTnpe8kEMVNN8lncRrKGdqGvk8m+dhFyeR7IsKMnwy2FQIQ3hrB9UGq/SI0IrP974KE80P57y+wL8X5vnstUY0ooOEPEBMKwYIukDgngAAAAASUVORK5CYII="},3214:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAWAgMAAAC52oSoAAAACVBMVEUAAAD3cGv3cWvCzsWeAAAAAnRSTlMAw3T+XjIAAAAcSURBVAjXY2BgYGUAAy5KqKxVQDABSlFoGNRJAGjzCAMeHrHiAAAAAElFTkSuQmCC"},"3eba":function(t,i,e){var a=e("24fb"),o=e("1de5"),n=e("f80b"),s=e("3214"),r=e("2493"),c=e("e1fe");i=a(!1);var d=o(n),u=o(s),l=o(r),p=o(c);i.push([t.i,".page[data-v-b63c40aa]{background:url("+d+") 0 bottom no-repeat;background-size:100% auto;font-size:14px;overflow:hidden}#editBox[data-v-b63c40aa]{width:90%;margin:10px auto;height:100%;overflow-y:auto}#ImgBox[data-v-b63c40aa]{-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.addImg[data-v-b63c40aa]{width:80px;height:80px;background:#fff9f9 url("+u+") 50% no-repeat;border-radius:8px;border:1px solid #f7716b;margin:10px 7px}.imgBox[data-v-b63c40aa]{margin:10px 7px;width:80px;height:80px;border-radius:8px;border:1px solid #f7716b;position:relative}.imgBox uni-image[data-v-b63c40aa]{width:77px;height:80px;border-radius:8px}.imgBox .colse[data-v-b63c40aa]{position:absolute;color:#fff;background-color:#ff7d7a;z-index:2;width:15px;height:15px;line-height:12px;text-align:center;font-size:12px;border-radius:50px;right:-6px;top:-6px}.title[data-v-b63c40aa]{font-size:18px;font-weight:600;margin:10px 0;line-height:1.5;padding-left:37px;background:url("+l+") no-repeat}.title1[data-v-b63c40aa]{background-image:url("+p+")}.editBox[data-v-b63c40aa]{background:#fff;border-radius:6px;border:1px solid #fff;min-height:100px;padding:8px 11px}.textPhoto[data-v-b63c40aa]{width:100%;height:100%}.textStory[data-v-b63c40aa]{width:100%;height:100px}.titIpt[data-v-b63c40aa]{border-radius:6px;border:1px solid #f3f3f3;padding:10px}.editSub[data-v-b63c40aa]{margin-top:40px;margin-bottom:20px;width:40%;color:#fff;background:-webkit-linear-gradient(right,#ff7d7a,#ffc298);background:linear-gradient(270deg,#ff7d7a,#ffc298);border-radius:22px}.editBox .addImg[data-v-b63c40aa],.editBox .imgBox[data-v-b63c40aa]{margin:10px 6px;width:75px;height:75px}.editBox .imgBox uni-image[data-v-b63c40aa]{width:75px;height:75px}#Switch[data-v-b63c40aa]{padding-top:30px}.isSwitch[data-v-b63c40aa]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:16px;line-height:2}.isSwitchTxt[data-v-b63c40aa]{font-size:12px;color:red;line-height:4}",""]),t.exports=i},"4fd3":function(t,i,e){"use strict";(function(t){var a=e("4ea4");e("a434"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=a(e("9a1a")),n={components:{popup:o.default},data:function(){return{userinfo:"",isShow:!1,isSwitch:!0,vation:!0,stype:2,type:0,imgList:[],title:["标题","正文"]}},onLoad:function(t){this.userinfo=JSON.parse(uni.getStorageSync("userInfo")),this.type=t.type,1==this.type&&(this.title=["上传图片","图片说明"])},methods:{colseImg:function(i){t.log(this.imgList),this.imgList.splice(i,1)},switchClick:function(i){this.isSwitch=i.detail.value,t.log(this.isSwitch)},updateImg:function(i){var e=this;if(this.imgList.length<5){e=this;uni.chooseImage({count:1,success:function(i){uni.showLoading({title:"上传图片中..."});var a=i.tempFilePaths[0],o=i.tempFiles[0];t.log(o);var n=e.$base.url+e.$base.api["fileUpload"],s={type:"img"};t.log(s),uni.uploadFile({url:n,filePath:a,name:"upfile",fileType:"image",formData:s,success:function(i){if(uni.hideLoading(),200==i.statusCode){var a=JSON.parse(i.data);if(t.log(a.code),0!=a.code){a=a.data,t.log(a.url.length),t.log(o,typeof o),t.log(a,typeof a),t.log(e.imgList);var o={fileName:a.fileName,url:a.url};e.imgList.push(o)}else this.$base.setshowToast(a.msg,"none","top",2e3)}else this.$base.setshowToast("图片上传失败","none","top",2e3)},fail:function(t){uni.hideLoading(),this.$base.setshowToast("图片上传失败","none","top",2e3)}})}})}else this.$base.setshowToast("一共只能上传5张图片","none","top",2e3)},closePopup:function(){this.isShow=!1;var t="/pages/story/index";1==this.type&&(t="/pages/photography/index"),uni.redirectTo({url:t})},goPopup:function(){this.isShow=!0},setDate:function(i){var e=this,a=i.detail.value;if(""==a.title?(this.$base.setshowToast("请输入标题","none","top",2e3),this.vation=!1):1!=this.type?""==a.text?(this.$base.setshowToast("请输入"+this.title[1],"none","top",2e3),this.vation=!1):this.vation=!0:0!=this.type&&this.imgList.length<=0?(this.$base.setshowToast("请上传图片","none","top",2e3),this.vation=!1):this.vation=!0,t.log(this.vation),this.vation){var o=this.isSwitch?"1":"0",n={activityId:"1",activityType:"1",title:a.title,content:a.text,userId:this.userinfo.id,imageList:this.imgList,isPublish:o};1==this.type&&(n={activityId:"2",activityType:"2",content:a.text,userId:this.userinfo.id,imageList:this.imgList,isPublish:o}),n=JSON.stringify(n),t.log(n),this.$base.getPost("POST",this.$base.api["contribute"],n).then((function(i){t.log(i);var a=i.data;1==a.code&&e.goPopup()})).catch((function(i){t.log("error:"+i)}))}},goHome:function(){uni.setStorageSync("qiang",JSON.stringify(1)),uni.redirectTo({url:"/pages/index/index"})}}};i.default=n}).call(this,e("5a52")["default"])},9045:function(t,i,e){"use strict";e.r(i);var a=e("4fd3"),o=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=o.a},b92f:function(t,i,e){"use strict";e.r(i);var a=e("1433"),o=e("9045");for(var n in o)"default"!==n&&function(t){e.d(i,t,(function(){return o[t]}))}(n);e("cd8e");var s,r=e("f0c5"),c=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"b63c40aa",null,!1,a["a"],s);i["default"]=c.exports},cd8e:function(t,i,e){"use strict";var a=e("f0ba"),o=e.n(a);o.a},e1fe:function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAMAAACelLz8AAAAh1BMVEUAAAD/fHr/fHr/fXr/fXr/fXr/fXv/e3v/gHr/cXH/enb/fXr/8/L/vLr/s7H/ysn/qaf/f3z/7e3/6+r/3dz/wL//tbT/lJL/iYb/hoT/7+//5OP/09L/urj/pqT/oqD/nJn/mZf/jYv/gX7/6Of/4OD/2tn/1NP/z87/xcP/nZv/kY//rKpYR7XjAAAAC3RSTlMAwfjlxpmBPi4JEWAMgjwAAAD3SURBVCjPhZLrDoIwDIU3pgOtOu6KCAjexfd/PsfaETBZPH+28dGmpy2zCiQXnie4DNhcPodR3J+A1RJmWq4sWS/gR4s1xVhSvMq3ZRhns+3iqr09OsppKsD7u3we9BHG2cW8h1pMbd2jbMHoksWhqVP7MR82HxjVpflwBEwigqZGcMhgtx0uknFC/T3dA0TVMY8QcSYIATSJChNVAEUJ5o0IoizRgRZ5UwTnE0yRcCHBuAtxKv5qWtGq4R6iZ0mWo/xYYYP2t3sPaJkyQqGSWhtW14YGSu3F/9N0qw3Ty6ehkOpXMQ56NkoSjdK9AO61+bds7hX9ApRsHGInwY4UAAAAAElFTkSuQmCC"},f0ba:function(t,i,e){var a=e("3eba");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=e("4f06").default;o("61c8e439",a,!0,{sourceMap:!1,shadowMode:!1})},f80b:function(t,i,e){t.exports=e.p+"static/img/bg.83b04dd0.png"}}]);