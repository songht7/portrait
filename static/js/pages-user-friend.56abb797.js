(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-friend"],{"03b2":function(t,i,e){"use strict";e.r(i);var n=e("ca09"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},"6af6":function(t,i,e){"use strict";e.r(i);var n=e("c2438"),a=e("03b2");for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("a5f7");var r,s=e("f0c5"),c=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"5f9c41d4",null,!1,n["a"],r);i["default"]=c.exports},9758:function(t,i,e){var n=e("c24f");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("561bcc7f",n,!0,{sourceMap:!1,shadowMode:!1})},a5f7:function(t,i,e){"use strict";var n=e("9758"),a=e.n(n);a.a},c2438:function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[t.list.length>0?e("v-uni-view",[e("v-uni-view",{staticClass:"friendBox"},t._l(t.list,(function(i,n){return e("v-uni-view",{key:n,staticClass:"friendList"},[e("v-uni-image",{attrs:{src:i.headUrl,mode:"heightFix"}}),e("v-uni-text",{staticClass:"name"},[t._v(t._s(i.nickName))]),e("v-uni-view",{staticClass:"friendBtn"},[e("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goTree(i.nickName,i.id)}}},[t._v("帮浇水")]),0==t.flag?e("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goChat(i)}}},[t._v("聊天")]):t._e()],1)],1)})),1),e("v-uni-view",{staticClass:"btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getPoint.apply(void 0,arguments)}}},[t._v("邀请好友领积分")])],1):t._e(),0==t.list.length?e("v-uni-view",{staticClass:"noDate"},[e("v-uni-view",{staticClass:"null"},[t._v("暂无好友")]),e("v-uni-view",{staticClass:"btn",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.getPoint.apply(void 0,arguments)}}},[t._v("邀请好友领积分")])],1):t._e(),t.isShow?e("v-uni-view",{staticClass:"show",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.closePopup.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"sanjiao"}),e("v-uni-view",{staticClass:"share"},[t._v("点击上方，分享")])],1):t._e()],1)},o=[]},c24f:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,".page[data-v-5f9c41d4]{font-size:%?30?%;margin-top:10px}.friendList[data-v-5f9c41d4]{width:90%;margin:0 auto;min-height:%?74?%;border-bottom:1px solid #f3f3f3;display:grid;grid-template-columns:15% 43% 40%;padding:%?33?% 0;line-height:%?74?%}.friendList uni-image[data-v-5f9c41d4]{height:%?74?%}.friendList .name[data-v-5f9c41d4]{width:100%}.friendBtn[data-v-5f9c41d4]{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;padding-top:%?8?%;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.friendBtn uni-text[data-v-5f9c41d4]{width:%?124?%;text-align:center;line-height:%?52?%;height:%?52?%;border-radius:%?26?%;border:1px solid #ff6228;color:#f7716b}.friendBtn uni-text[data-v-5f9c41d4]:last-child{margin-left:%?24?%}.btn[data-v-5f9c41d4]{width:85%;height:%?96?%;line-height:%?96?%;text-align:center;color:#fff;font-size:%?36?%;background:-webkit-linear-gradient(left,#ffc298,#ff7d7a);background:linear-gradient(90deg,#ffc298,#ff7d7a);box-shadow:0 2px 10px 0 #f7716b;border-radius:48px;margin:%?110?% auto 0;font-weight:600}.show[data-v-5f9c41d4]{position:fixed;width:100%;height:100%;background:rgba(0,0,0,.5);top:0;right:0}.show .share[data-v-5f9c41d4]{width:135px;border-radius:8px;text-align:center;padding:7px 0;position:fixed;right:2px;top:10px;color:#ff8033;background-color:hsla(0,0%,100%,.8)}.sanjiao[data-v-5f9c41d4]{width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:10px solid hsla(0,0%,100%,.8);position:fixed;right:17px;top:0}",""]),t.exports=i},ca09:function(t,i,e){"use strict";(function(t){var n=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("5530")),o=n(e("9a1a")),r=n(e("ada9")),s=e("2f62"),c={components:{popup:o.default},data:function(){return{isShow:!1,type:3,num:3,pageNo:1,pageSize:20,list:[],flag:""}},computed:(0,a.default)({},(0,s.mapState)({isLogin:function(t){return t.isLogin},isSDKReady:function(t){return t.isSDKReady}})),onShow:function(){},onLoad:function(){this.wxOpen(),uni.setStorageSync("qiang",JSON.stringify(1)),this.friendList(),this.flag=JSON.parse(uni.getStorageSync("userInfo")).userFlag},methods:{wxOpen:function(){var i=window.location.href,e={url:i};this.$base.getRequest("GET",this.$base.api["getJsApiSign"],e).then((function(t){var i=t.data;1==i.code&&(r.default.config({beta:!0,debug:!1,appId:i.data.appId,timestamp:i.data.timestamp,nonceStr:i.data.nonceStr,signature:i.data.signature,jsApiList:["updateAppMessageShareData"]}),r.default.ready((function(){var t="https://"+window.location.host+"/#/pages/user/login?id="+JSON.parse(uni.getStorageSync("userInfo")).id;r.default.updateAppMessageShareData({title:"脑胶质瘤患者社群欢迎您的加入",desc:"守护生命 播种希望",link:t,imgUrl:"https://testmdmooc.oss-cn-beijing.aliyuncs.com//careapi/img/2021/10/19/b4b209a2112d40d3b79323480c53b7be.jpg",success:function(t){},fail:function(t){}})})),r.default.error((function(t){window.location.reload()})))})).catch((function(i){t.log("error:"+i)}))},friendList:function(){var i=this,e=this;e.num=JSON.parse(uni.getStorageSync("userInfo")).id;var n={userId:this.num,pageNo:this.pageNo,pageSize:this.pageSize};this.$base.getRequest("GET",this.$base.api["friendList"],n).then((function(n){t.log(n,"好友列表");var a=n.data;1==a.code&&(e.list=a.data,e.pageNo++,i.loginBtn())})).catch((function(i){t.log("error:"+i)}))},loginBtn:function(){var i=this,e=JSON.parse(uni.getStorageSync("userInfo")).id,n=JSON.parse(uni.getStorageSync("userInfo")).userSig,a=this.tim.login({userID:e,userSig:n});a.then((function(e){t.log(e,111),i.$store.commit("toggleIsLogin",!0),uni.setStorageSync("userInfo",JSON.stringify(userInfo)),uni.setStorageSync("userTIMInfo",JSON.stringify(e.data))})).catch((function(i){t.warn("login error:",i)}))},closePopup:function(){this.isShow=!1},goPopup:function(){this.isShow=!0},getPoint:function(){this.goPopup()},goTree:function(t,i){uni.navigateTo({url:"/pages/user/tree?id="+i+"&name="+t})},goChat:function(t){this.$store.commit("createConversationActive",t.id),uni.navigateTo({url:"/pages/user/room?id="+t+"&img="+t.headUrl})}}};i.default=c}).call(this,e("5a52")["default"])}}]);